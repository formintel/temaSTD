{"version":3,"sources":["../../../src/folders/endpoints/populateFolderData.ts"],"sourcesContent":["import httpStatus from 'http-status'\n\nimport type { Endpoint } from '../../index.js'\n\nimport { getFolderData } from '../utils/getFolderData.js'\n\nexport const populateFolderDataEndpoint: Endpoint = {\n  handler: async (req) => {\n    if (!req?.user) {\n      return Response.json(\n        {\n          message: 'Unauthorized request.',\n        },\n        {\n          status: httpStatus.UNAUTHORIZED,\n        },\n      )\n    }\n\n    const folderCollection = Boolean(req.payload.collections?.[req.payload.config.folders.slug])\n\n    if (!folderCollection) {\n      return Response.json(\n        {\n          message: 'Folders are not configured',\n        },\n        {\n          status: httpStatus.NOT_FOUND,\n        },\n      )\n    }\n\n    const data = await getFolderData({\n      collectionSlug: req.searchParams?.get('collectionSlug') || undefined,\n      folderID: req.searchParams?.get('folderID') || undefined,\n      req,\n      search: req.searchParams?.get('search') || undefined,\n    })\n\n    return Response.json(data)\n  },\n  method: 'get',\n  path: '/populate-folder-data',\n}\n"],"names":["httpStatus","getFolderData","populateFolderDataEndpoint","handler","req","user","Response","json","message","status","UNAUTHORIZED","folderCollection","Boolean","payload","collections","config","folders","slug","NOT_FOUND","data","collectionSlug","searchParams","get","undefined","folderID","search","method","path"],"mappings":"AAAA,OAAOA,gBAAgB,cAAa;AAIpC,SAASC,aAAa,QAAQ,4BAA2B;AAEzD,OAAO,MAAMC,6BAAuC;IAClDC,SAAS,OAAOC;QACd,IAAI,CAACA,KAAKC,MAAM;YACd,OAAOC,SAASC,IAAI,CAClB;gBACEC,SAAS;YACX,GACA;gBACEC,QAAQT,WAAWU,YAAY;YACjC;QAEJ;QAEA,MAAMC,mBAAmBC,QAAQR,IAAIS,OAAO,CAACC,WAAW,EAAE,CAACV,IAAIS,OAAO,CAACE,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC;QAE3F,IAAI,CAACN,kBAAkB;YACrB,OAAOL,SAASC,IAAI,CAClB;gBACEC,SAAS;YACX,GACA;gBACEC,QAAQT,WAAWkB,SAAS;YAC9B;QAEJ;QAEA,MAAMC,OAAO,MAAMlB,cAAc;YAC/BmB,gBAAgBhB,IAAIiB,YAAY,EAAEC,IAAI,qBAAqBC;YAC3DC,UAAUpB,IAAIiB,YAAY,EAAEC,IAAI,eAAeC;YAC/CnB;YACAqB,QAAQrB,IAAIiB,YAAY,EAAEC,IAAI,aAAaC;QAC7C;QAEA,OAAOjB,SAASC,IAAI,CAACY;IACvB;IACAO,QAAQ;IACRC,MAAM;AACR,EAAC"}