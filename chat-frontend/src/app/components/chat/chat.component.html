<div class="chat-container">
    <div class="chat-header">
      <h2>Chat Room</h2>
      <div class="connection-status">
        <span [class]="'status-indicator ' + (isConnected ? 'connected' : 'disconnected')"></span>
        <span class="status-text">{{ isConnected ? 'Conectat' : 'Deconectat' }}</span>
        <button *ngIf="!isConnected" (click)="reconnect()" class="reconnect-btn">
          Reconectare
        </button>
      </div>
    </div>
    
    <div class="chat-messages" #messagesContainer>
      <div *ngIf="messages.length === 0" class="no-messages">
        <div class="no-messages-icon">💬</div>
        <p>Nu există mesaje încă. Începe conversația!</p>
      </div>
      
      <div *ngFor="let message of messages; trackBy: trackByMessage" class="message">
        <div class="message-header">
          <span class="username">{{ message.username }}</span>
          <span class="timestamp">{{ formatTimestamp(message.timestamp) }}</span>
        </div>
        <div class="message-content">{{ message.message }}</div>
      </div>
    </div>
    
    <div class="chat-input">
      <div class="input-row">
        <input 
          type="text" 
          [(ngModel)]="username" 
          placeholder="Numele tău"
          class="username-input"
          [disabled]="!isConnected"
          maxlength="50">
        
        <input 
          type="text" 
          [(ngModel)]="newMessage" 
          (keypress)="onKeyPress($event)"
          placeholder="Scrie un mesaj..."
          class="message-input"
          [disabled]="!isConnected || !username.trim()"
          maxlength="500">
        
        <button 
          (click)="sendMessage()" 
          [disabled]="!isConnected || !newMessage.trim() || !username.trim()"
          class="send-button"
          title="Trimite mesaj">
          <span class="send-icon">📤</span>
          Trimite
        </button>
      </div>
      
      <div class="input-info" *ngIf="!isConnected">
        <small>Conectarea la server în curs...</small>
      </div>
    </div>
  </div>